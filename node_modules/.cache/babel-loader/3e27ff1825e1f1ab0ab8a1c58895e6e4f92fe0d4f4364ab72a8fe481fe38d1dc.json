{"ast":null,"code":"import _regeneratorRuntime from\"C:/Bitacora Cambios/REACT/Assessment/eventfinderapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Bitacora Cambios/REACT/Assessment/eventfinderapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{REGISTER_USER,GET_AUTH_USER,ERROR_USER,EXISTS_AUTH_USER,CLEAR_AUTH_USER,NEW_REGISTRATION_ACTION}from'./types';import setAuthToken from'../utils/setAuthToken';//AUTH USER\nexport var authenticateUser=function authenticateUser(user){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var vemail,vpassword,resp,data,respregion,dataregion,regionname;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;console.log('uno');console.log(user);debugger;vemail=user.loginUserEmail;vpassword=user.loginUserPassword;console.log(vpassword);_context.next=9;return fetch(\"http://localhost:5000/users?email=\"+vemail+\"&password=\"+vpassword);case 9:resp=_context.sent;_context.next=12;return resp.json();case 12:data=_context.sent;if(!(data.length>0)){_context.next=25;break;}console.log(data[0].region);_context.next=17;return fetch(\"http://localhost:5000/regions?id=\"+data[0].region);case 17:respregion=_context.sent;_context.next=20;return respregion.json();case 20:dataregion=_context.sent;if(dataregion.length>0){regionname=dataregion[0].regionname;console.log(regionname);data[0][\"regionname\"]=regionname;}dispatch({type:GET_AUTH_USER,payload:data[0]});_context.next=32;break;case 25:_context.next=27;return fetch(\"http://localhost:5000/users?email=\"+vemail);case 27:resp=_context.sent;_context.next=30;return resp.json();case 30:data=_context.sent;if(data.length===0)dispatch({type:ERROR_USER,payload:\"User does not exist\"});else dispatch({type:ERROR_USER,payload:\"Password is not correct\"});case 32:_context.next=37;break;case 34:_context.prev=34;_context.t0=_context[\"catch\"](0);dispatch({type:ERROR_USER,payload:_context.t0.response.statusText});case 37:case\"end\":return _context.stop();}},_callee,null,[[0,34]]);}));return function(_x){return _ref.apply(this,arguments);};}();};//REGISTER AN USER\nexport var existsUserEmail=function existsUserEmail(useremail){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var exists,resp,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:exists=\"0\";_context2.prev=1;_context2.next=4;return fetch(\"http://localhost:5000/users?email=\"+useremail);case 4:resp=_context2.sent;_context2.next=7;return resp.json();case 7:data=_context2.sent;if(data.length>0)exists=\"1\";dispatch({type:EXISTS_AUTH_USER,payload:exists});_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](1);dispatch({type:ERROR_USER,payload:_context2.t0.response.statusText});case 15:case\"end\":return _context2.stop();}},_callee2,null,[[1,12]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var newRegistrationAction=function newRegistrationAction(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:dispatch({type:NEW_REGISTRATION_ACTION});case 1:case\"end\":return _context3.stop();}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var clearauthuser=function clearauthuser(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:try{dispatch({type:CLEAR_AUTH_USER});}catch(error){dispatch({type:ERROR_USER,payload:error.response.statusText});}case 1:case\"end\":return _context4.stop();}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();};//REGISTER AN USER\nexport var createUser=function createUser(user){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(dispatch){var resp,data;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.prev=0;debugger;_context5.next=4;return fetch(\"http://localhost:5000/users\",{method:'POST',body:JSON.stringify(user),headers:{'Content-Type':'application/json'}});case 4:resp=_context5.sent;_context5.next=7;return resp.json();case 7:data=_context5.sent;dispatch({type:REGISTER_USER,payload:data});_context5.next=14;break;case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](0);dispatch({type:ERROR_USER,payload:_context5.t0.response.statusText});case 14:case\"end\":return _context5.stop();}},_callee5,null,[[0,11]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"names":["REGISTER_USER","GET_AUTH_USER","ERROR_USER","EXISTS_AUTH_USER","CLEAR_AUTH_USER","NEW_REGISTRATION_ACTION","setAuthToken","authenticateUser","user","dispatch","console","log","vemail","loginUserEmail","vpassword","loginUserPassword","fetch","resp","json","data","length","region","respregion","dataregion","regionname","type","payload","response","statusText","existsUserEmail","useremail","exists","newRegistrationAction","clearauthuser","error","createUser","method","body","JSON","stringify","headers"],"sources":["C:/Bitacora Cambios/REACT/Assessment/eventfinderapp/src/actions/authActions.js"],"sourcesContent":["import {  REGISTER_USER, GET_AUTH_USER , ERROR_USER, EXISTS_AUTH_USER, CLEAR_AUTH_USER, NEW_REGISTRATION_ACTION \r\n} from './types'\r\nimport setAuthToken from '../utils/setAuthToken'\r\n\r\n//AUTH USER\r\nexport const authenticateUser = (user)  => async dispatch => {\r\n\r\n    try{\r\n        console.log('uno');\r\n        console.log(user);\r\n        debugger;\r\n        \r\n        const vemail = user.loginUserEmail;\r\n        const vpassword =user.loginUserPassword;\r\n\r\n        \r\n        console.log(vpassword);\r\n\r\n        let resp = await fetch(\"http://localhost:5000/users?email=\" + vemail + \"&password=\" + vpassword);\r\n        let data = await resp.json();\r\n\r\n        if (data.length > 0){\r\n            console.log(data[0].region);    \r\n\r\n            let respregion = await fetch(\"http://localhost:5000/regions?id=\" + data[0].region);    \r\n            let dataregion = await respregion.json();\r\n\r\n            if (dataregion.length > 0){\r\n                const regionname = dataregion[0].regionname;\r\n                console.log(regionname);\r\n                data[0][\"regionname\"] = regionname; \r\n            }\r\n\r\n            \r\n\r\n            dispatch({\r\n                type:  GET_AUTH_USER, \r\n                payload: data[0]\r\n            })\r\n        }\r\n        else{\r\n            resp = await fetch(\"http://localhost:5000/users?email=\" + vemail);\r\n            data = await resp.json();\r\n\r\n            if (data.length === 0)\r\n            dispatch({\r\n                type:  ERROR_USER, \r\n                payload: \"User does not exist\"\r\n            }) \r\n            else\r\n            dispatch({\r\n                type:  ERROR_USER, \r\n                payload: \"Password is not correct\"\r\n            })\r\n        }\r\n    } \r\n    catch(error)\r\n    {\r\n        dispatch({\r\n            type:  ERROR_USER, \r\n            payload: error.response.statusText\r\n        })\r\n    }\r\n\r\n\r\n}\r\n\r\n//REGISTER AN USER\r\nexport const existsUserEmail = (useremail)  => async dispatch => {\r\n\r\n    let exists = \"0\";\r\n\r\n    try{\r\n        const resp = await fetch(\"http://localhost:5000/users?email=\" + useremail);\r\n        const data = await resp.json();\r\n        \r\n\r\n        if (data.length > 0)\r\n            exists = \"1\";\r\n           \r\n        dispatch({\r\n            type:  EXISTS_AUTH_USER, \r\n            payload: exists\r\n        })\r\n    } \r\n    catch(error)\r\n    {\r\n        dispatch({\r\n            type:  ERROR_USER, \r\n            payload: error.response.statusText\r\n        })\r\n    }\r\n\r\n    \r\n}\r\n\r\nexport const newRegistrationAction = ()  => async dispatch => {\r\n\r\n    dispatch({\r\n        type:  NEW_REGISTRATION_ACTION\r\n    }) \r\n\r\n}\r\n\r\n\r\nexport const clearauthuser = ()  => async dispatch => {\r\n\r\n    try{\r\n        \r\n        dispatch({\r\n            type:  CLEAR_AUTH_USER\r\n        })     \r\n    } \r\n    catch(error)\r\n    {\r\n        dispatch({\r\n            type:  ERROR_USER, \r\n            payload: error.response.statusText\r\n        })\r\n    }\r\n\r\n\r\n}\r\n\r\n//REGISTER AN USER\r\nexport const createUser = (user)  => async dispatch => {\r\n\r\n    try{\r\n        debugger;\r\n\r\n        const resp = await fetch(\"http://localhost:5000/users\",\r\n            {\r\n               method:'POST',\r\n               body:JSON.stringify(user),\r\n               headers: {\r\n                'Content-Type': 'application/json'\r\n                }     \r\n            }                            \r\n        );\r\n\r\n        const data = await resp.json();\r\n\r\n        dispatch({\r\n            type:  REGISTER_USER, \r\n            payload: data\r\n        })     \r\n    } \r\n    catch(error)\r\n    {\r\n        dispatch({\r\n            type:  ERROR_USER, \r\n            payload: error.response.statusText\r\n        })\r\n    }\r\n\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}