{"ast":null,"code":"import React,{useEffect}from'react';import EventItem from'./EventItem';import{connect}from'react-redux';import{searchEventsPerText}from'../../actions/eventActions';import{useNavigate}from'react-router-dom';import M from'materialize-css/dist/js/materialize.min.js';import{jsx as _jsx}from\"react/jsx-runtime\";var Events=function Events(_ref){var authuser=_ref.authuser,_ref$event=_ref.event,events=_ref$event.events,current=_ref$event.current,loading=_ref$event.loading,searchText=_ref$event.searchText,searchEventsPerText=_ref.searchEventsPerText;var navigate=useNavigate();useEffect(function(){//if (authuser.isauthenticated === true)\nif(localStorage.getItem('token')!=null){if(authuser.currentuser===null)authuser.currentuser=JSON.parse(localStorage.getItem('token'));console.log('entro aqui 01');//getEventsPerRegion();\n//eslint-disable-next-line \nconsole.log('entro aqui 02');console.log(searchText);console.log('before search');console.log(authuser);searchEventsPerText(searchText,authuser.currentuser.region);console.log('after search');console.log(authuser);}},[searchText]);//once\nuseEffect(function(){debugger;console.log('events');console.log(localStorage.getItem('token'));M.AutoInit();//if (authuser.isauthenticated === false)\nif(localStorage.getItem('token')===null)navigate('/');},[]);//once\nvar renderEventRow=function renderEventRow(events){var arrrenderEventRowGroup=[];if(events!=null){var i=0;var group=0;var eventGroup=[];events.forEach(function(el){i=i+1;eventGroup.push(el);if(i%3===0){group=group+1;arrrenderEventRowGroup.push(renderEventRowGroup(group,eventGroup));eventGroup=[];}console.log(i);});if(eventGroup.length>0){group=group+1;arrrenderEventRowGroup.push(renderEventRowGroup(group,eventGroup));}}return arrrenderEventRowGroup;};var renderEventRowGroup=function renderEventRowGroup(group,eventGroup){if(eventGroup!=null){var eventrowdiv=eventGroup.map(function(tmpevent,index){console.log('entro al loop '+index);return/*#__PURE__*/_jsx(\"div\",{className:\"col s12 m4 center\",children:/*#__PURE__*/_jsx(EventItem,{event:tmpevent},tmpevent.id)},tmpevent.id);});return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:eventrowdiv},group);}else{return/*#__PURE__*/_jsx(\"h4\",{children:\"Empty list\"});}};return renderEventRow(events);};var mapStatetoProps=function mapStatetoProps(state){return{event:state.event,authuser:state.authuser};};export default connect(mapStatetoProps,{searchEventsPerText:searchEventsPerText})(Events);","map":{"version":3,"names":["React","useEffect","EventItem","connect","searchEventsPerText","useNavigate","M","Events","authuser","event","events","current","loading","searchText","navigate","localStorage","getItem","currentuser","JSON","parse","console","log","region","AutoInit","renderEventRow","arrrenderEventRowGroup","i","group","eventGroup","forEach","el","push","renderEventRowGroup","length","eventrowdiv","map","tmpevent","index","id","mapStatetoProps","state"],"sources":["C:/Bitacora Cambios/REACT/Assessment/eventfinderapp/src/components/events/Events.js"],"sourcesContent":["import React, {useEffect} from 'react'\r\nimport EventItem from './EventItem'\r\nimport {connect} from 'react-redux'\r\nimport {searchEventsPerText} from '../../actions/eventActions'\r\nimport propTypes from 'prop-types'\r\nimport {useNavigate} from 'react-router-dom'\r\nimport M from 'materialize-css/dist/js/materialize.min.js';\r\n\r\n\r\nconst Events = ({authuser, event :{events, current, loading, searchText}, searchEventsPerText}) => {\r\n\r\n  let navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n\r\n    //if (authuser.isauthenticated === true)\r\n    if (localStorage.getItem('token') != null)\r\n    {\r\n      if (authuser.currentuser === null)\r\n          authuser.currentuser = JSON.parse(localStorage.getItem('token'));\r\n      \r\n      console.log('entro aqui 01')\r\n    //getEventsPerRegion();\r\n     //eslint-disable-next-line \r\n     console.log('entro aqui 02');\r\n     console.log(searchText);\r\n     console.log('before search');     \r\n    console.log(authuser);\r\n     searchEventsPerText(searchText, authuser.currentuser.region);\r\n     console.log('after search');     \r\n    console.log(authuser);\r\n    }    \r\n  }, [searchText]) //once\r\n\r\n\r\n  useEffect(() => {  \r\n    debugger;  \r\n    console.log('events');\r\n    console.log(localStorage.getItem('token') );\r\n    M.AutoInit();\r\n\r\n    //if (authuser.isauthenticated === false)\r\n    if (localStorage.getItem('token') === null)\r\n        navigate('/');\r\n  }, []) //once\r\n\r\n  \r\n  const renderEventRow = (events) => {\r\n\r\n    var arrrenderEventRowGroup = [];\r\n    \r\n    if (events != null){\r\n\r\n        var i=0;\r\n        var group=0;\r\n        var eventGroup = [];        \r\n\r\n        events.forEach((el)=>{\r\n            i = i + 1;\r\n            eventGroup.push(el);\r\n            if (i %3 === 0){\r\n              group = group + 1;\r\n              arrrenderEventRowGroup.push(renderEventRowGroup(group, eventGroup));  \r\n              eventGroup = [];\r\n            }\r\n            \r\n            console.log(i)\r\n        })\r\n\r\n        if  (eventGroup.length > 0){\r\n              group = group + 1;\r\n              arrrenderEventRowGroup.push(renderEventRowGroup(group, eventGroup));  \r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    return arrrenderEventRowGroup;\r\n\r\n  }\r\n  \r\n  const renderEventRowGroup = (group, eventGroup) => {\r\n\r\n    if (eventGroup != null){\r\n\r\n      const eventrowdiv =  eventGroup.map((tmpevent,index) =>  {\r\n                            console.log('entro al loop '+ index);\r\n                            \r\n                            return (\r\n                              <div className=\"col s12 m4 center\" key={tmpevent.id}>\r\n                                  <EventItem key={tmpevent.id} event={tmpevent}></EventItem>  \r\n                              </div>\r\n                              )                                  \r\n                          }\r\n                  )       \r\n      \r\n      return  <div className=\"row\" key={group}>\r\n                  {eventrowdiv}\r\n              </div> \r\n  }\r\n  else{\r\n    return(        \r\n        <h4>Empty list</h4>\r\n      )   \r\n  }\r\n\r\n  \r\n  }\r\n\r\n  return (        \r\n    renderEventRow(events)            \r\n  );\r\n}\r\n\r\nEvents.propTypes = {\r\n  searchEventsPerText: propTypes.func.isRequired,\r\n  authuser: propTypes.object.isRequired,\r\n  event: propTypes.object.isRequired\r\n}\r\n\r\nconst mapStatetoProps = state => ({\r\n  event: state.event,\r\n  authuser:state.authuser\r\n})\r\n\r\n\r\n\r\nexport default connect(mapStatetoProps, {searchEventsPerText})(Events)\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}