{"ast":null,"code":"import _slicedToArray from\"C:/Bitacora Cambios/REACT/Assessment/eventfinderapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import M from'materialize-css/dist/js/materialize.min.js';import{connect}from'react-redux';import{useNavigate}from'react-router-dom';import{authenticateUser,newRegistrationAction}from'../../actions/authActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var authuser=_ref.authuser,authenticateUser=_ref.authenticateUser,newRegistrationAction=_ref.newRegistrationAction;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),loginUserEmail=_useState2[0],SetLoginUserEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),loginUserPassword=_useState4[0],SetLoginUserPassword=_useState4[1];var navigate=useNavigate();useEffect(function(){M.AutoInit();},[]);useEffect(function(){if(authuser.isauthenticated){console.log('redirecting to main page');//this.props.history.push('/events');                       \nnavigate('/events');}},[authuser.isauthenticated]);useEffect(function(){SetLoginUserEmail('');SetLoginUserPassword('');document.getElementById(\"LoginUserEmail\").classList.remove(\"invalid\");document.getElementById(\"LoginUserEmail\").classList.remove(\"valid\");document.getElementById(\"LoginUserPassword\").classList.remove(\"invalid\");document.getElementById(\"LoginUserPassword\").classList.remove(\"valid\");},[authuser.newregistrationaction]);useEffect(function(){//eslint-disable-next-line \n//console.log('hi');\n//console.log(authuser)\nif(authuser.errormessage!==null&&authuser.errormessage!==\"\"){if(authuser.errormessage===\"User does not exist\"){SetLoginUserEmail('');SetLoginUserPassword('');}else if(authuser.errormessage===\"Password is not correct\"){SetLoginUserPassword('');}else{SetLoginUserEmail('');SetLoginUserPassword('');}M.toast({html:authuser.errormessage});}},[authuser]);//once\nvar onSubmit=function onSubmit(){//debugger;\n//console.log(loginUserEmail);\n//console.log(loginUserPassword);\n//debugger;\nif(loginUserEmail===''||loginUserPassword===''){M.toast({html:'Please enter user and password'});}else{var userInfo={loginUserEmail:loginUserEmail,loginUserPassword:loginUserPassword};console.log('before authenticateUser');authenticateUser(userInfo);}console.log('log in application');};var onRegister=function onRegister(){newRegistrationAction();console.log('on Register application');};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col l3 m3 s12\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col l6 m6 s12 z-depth-5 card-panel\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"center\",children:\"Log In\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"LoginUserEmail\",type:\"email\",className:\"validate\",value:loginUserEmail,\"data-error\":\"Please enter email address\",onChange:function onChange(e){return SetLoginUserEmail(e.target.value);},required:\"required\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"LoginUserEmail\",children:\"Enter email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"helper-text\",\"data-error\":\"wrong\",\"data-success\":\"right\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"LoginUserPassword\",type:\"password\",className:\"validate\",value:loginUserPassword,onChange:function onChange(e){return SetLoginUserPassword(e.target.value);},\"data-error\":\"Please enter password\",required:\"required\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"LoginUserPassword\",children:\"Enter password\"}),/*#__PURE__*/_jsx(\"span\",{className:\"helper-text\",\"data-error\":\"wrong\",\"data-success\":\"right\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#!\",onClick:onSubmit,className:\"waves-effect waves-light btn\",children:\"Log In\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#registeruser-event-modal\",className:\"waves-effect waves-light modal-trigger tooltipped\",\"data-tooltip\":\"Register a new user\",onClick:onRegister,children:\"Register\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col l3 m3 s12\"})]})});};function mapStateToProps(state){return{authuser:state.authuser};}export default connect(mapStateToProps,{authenticateUser:authenticateUser,newRegistrationAction:newRegistrationAction})(Login);","map":{"version":3,"names":["React","useState","useEffect","M","connect","useNavigate","authenticateUser","newRegistrationAction","Login","authuser","loginUserEmail","SetLoginUserEmail","loginUserPassword","SetLoginUserPassword","navigate","AutoInit","isauthenticated","console","log","document","getElementById","classList","remove","newregistrationaction","errormessage","toast","html","onSubmit","userInfo","onRegister","e","target","value","mapStateToProps","state"],"sources":["C:/Bitacora Cambios/REACT/Assessment/eventfinderapp/src/components/auth/Login.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport M from 'materialize-css/dist/js/materialize.min.js'\r\nimport {connect} from 'react-redux'\r\nimport propTypes from 'prop-types'\r\nimport {useNavigate} from 'react-router-dom'\r\nimport {authenticateUser, newRegistrationAction} from '../../actions/authActions'\r\n\r\n\r\nconst Login = ({authuser, authenticateUser,newRegistrationAction}) => {\r\n    const [loginUserEmail, SetLoginUserEmail] = useState('');\r\n    const [loginUserPassword, SetLoginUserPassword] = useState('');\r\n\r\n    let navigate = useNavigate();\r\n\r\n    \r\n    useEffect(() => {\r\n\r\n      M.AutoInit();\r\n  },[]);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n      if (authuser.isauthenticated){\r\n        console.log('redirecting to main page');\r\n        //this.props.history.push('/events');                       \r\n        navigate('/events');\r\n      }          \r\n  },[authuser.isauthenticated]);\r\n\r\n\r\n    useEffect(() => {\r\n      \r\n      SetLoginUserEmail('');\r\n      SetLoginUserPassword('');\r\n      \r\n      document.getElementById(\"LoginUserEmail\").classList.remove(\"invalid\");\r\n      document.getElementById(\"LoginUserEmail\").classList.remove(\"valid\");\r\n      document.getElementById(\"LoginUserPassword\").classList.remove(\"invalid\");\r\n      document.getElementById(\"LoginUserPassword\").classList.remove(\"valid\");\r\n      \r\n      \r\n  },[authuser.newregistrationaction]);\r\n\r\n    useEffect(() => {\r\n          \r\n       //eslint-disable-next-line \r\n       //console.log('hi');\r\n       //console.log(authuser)\r\n\r\n       if (authuser.errormessage !== null && authuser.errormessage !== \"\"){\r\n          \r\n          if (authuser.errormessage === \"User does not exist\")  {\r\n            SetLoginUserEmail('');\r\n            SetLoginUserPassword(''); \r\n          } else if (authuser.errormessage === \"Password is not correct\")  {\r\n            SetLoginUserPassword('');  \r\n          } else {\r\n            SetLoginUserEmail('');\r\n            SetLoginUserPassword('');\r\n          }\r\n\r\n        \r\n        M.toast({ html: authuser.errormessage}); \r\n       }\r\n       \r\n    }, [authuser]) //once\r\n\r\n  const onSubmit = () => {\r\n\r\n      //debugger;\r\n      //console.log(loginUserEmail);\r\n      //console.log(loginUserPassword);\r\n      //debugger;\r\n      if (loginUserEmail === '' || loginUserPassword === '' ){\r\n        M.toast({ html:'Please enter user and password'}); \r\n      }\r\n      else{\r\n\r\n        const userInfo = {\r\n          loginUserEmail: loginUserEmail,\r\n          loginUserPassword: loginUserPassword\r\n        }\r\n\r\n        console.log('before authenticateUser');\r\n\r\n        authenticateUser(userInfo);\r\n\r\n        \r\n\r\n        \r\n                \r\n      }\r\n\r\n\r\n      \r\n        console.log('log in application');\r\n        \r\n  }\r\n\r\n\r\n  const onRegister = () => {\r\n\r\n    newRegistrationAction();\r\n    console.log('on Register application');\r\n\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"container\">        \r\n        <div className='row'>    \r\n            <div className=\"col l3 m3 s12\"></div>\r\n            <div className=\"col l6 m6 s12 z-depth-5 card-panel\">                \r\n                  <h5 className=\"center\">Log In</h5>\r\n                  <div className=\"input-field col s12\">                \r\n                    <input id=\"LoginUserEmail\" type=\"email\" className=\"validate\"\r\n                     value={loginUserEmail}\r\n                     data-error=\"Please enter email address\"\r\n                     onChange={e => SetLoginUserEmail(e.target.value)} \r\n                     required=\"required\"/>\r\n                    <label htmlFor=\"LoginUserEmail\">Enter email</label>\r\n                    <span className=\"helper-text\" data-error=\"wrong\" data-success=\"right\"></span>\r\n                  </div>\r\n                  <div className=\"input-field col s12\">\r\n                    <input id=\"LoginUserPassword\" type=\"password\" className=\"validate\"\r\n                    value={loginUserPassword}\r\n                    onChange={e => SetLoginUserPassword(e.target.value)} \r\n                    data-error=\"Please enter password\"\r\n                    required=\"required\"/>\r\n                    <label htmlFor=\"LoginUserPassword\">Enter password</label>\r\n                    <span className=\"helper-text\" data-error=\"wrong\" data-success=\"right\"></span>\r\n                  </div>                       \t  \r\n                  <div className=\"input-field col s12\">\r\n                      <a href=\"#!\" \r\n                      onClick={onSubmit}\r\n                      className='waves-effect waves-light btn'>Log In</a>  \t\t\t\r\n                  </div>\r\n                  <div className=\"input-field col s12\">\r\n                      <a href=\"#registeruser-event-modal\"\r\n                              className='waves-effect waves-light modal-trigger tooltipped'                                                          \r\n                              data-tooltip=\"Register a new user\"\r\n                              onClick={onRegister}\r\n                              >Register                           \r\n                      </a>                       \r\n                  </div>                 \r\n            </div>\r\n            <div className=\"col l3 m3 s12\"></div>            \r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nLogin.propTypes = {\r\n  authuser:propTypes.object.isRequired,\r\n  authenticateUser: propTypes.func.isRequired\r\n}\r\n\r\nfunction mapStateToProps (state)  {     \r\n  return {authuser:  state.authuser};\r\n}\r\n\r\nexport default connect(mapStateToProps, {authenticateUser,newRegistrationAction})(Login)\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}